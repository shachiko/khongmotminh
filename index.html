<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√¥ng M·ªôt M√¨nh ‚Äì C√πng nhau an to√†n tr·ª±c tuy·∫øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .quiz-option:hover {
            background-color: #DBEAFE; /* Light blue on hover */
        }
        .quiz-option.selected {
            background-color: #93C5FD; /* Darker blue when selected */
            border-color: #2563EB;
        }
        .quiz-option.correct {
            background-color: #D1FAE5;
            border-color: #059669;
            color: #047857;
            font-weight: bold;
        }
        .quiz-option.incorrect {
            background-color: #FEE2E2;
            border-color: #E11D48;
            color: #BE123C;
        }
        #quiz-container.submitted .quiz-option {
            pointer-events: none;
            cursor: default;
        }
        /* Style for theory sections */
        .theory-section {
            margin-top: 1.5rem; /* Reduced margin */
            padding-top: 1rem; /* Reduced padding */
            /* border-top: 1px solid #e5e7eb; Removed border for continuous flow */
        }
        .theory-section h4 {
             margin-top: 1.5rem; /* mt-6 */
             margin-bottom: 0.75rem; /* mb-3 */
             font-size: 1.25rem; /* text-xl */
             font-weight: 700; /* font-bold */
        }
         .theory-section h5 {
             margin-top: 1rem; /* mt-4 */
             margin-bottom: 0.5rem; /* mb-2 */
             font-size: 1.125rem; /* text-lg */
             font-weight: 600; /* font-semibold */
         }
        /* Th√™m style cho b·∫£ng */
        .theory-table {
            width: 100%;
            margin-top: 1rem;
            border-collapse: collapse;
        }
        .theory-table th, .theory-table td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
        }
        .theory-table th {
            background-color: #f3f4f6;
            font-weight: 700;
        }
        .theory-table td:first-child {
            font-weight: 700;
            width: 20%;
        }

    </style>
</head>
<body class="bg-blue-50 text-gray-800 flex flex-col min-h-screen">

    <div id="app" class="container mx-auto p-4 max-w-4xl flex flex-col flex-grow">

        <header class="text-center my-8">
            <img id="logo" src="logo-tron.png" alt="Logo Kh√¥ng M·ªôt M√¨nh" class="w-20 h-20 mx-auto mb-4 rounded-full"
                 onerror="this.onerror=null;this.src='https://placehold.co/100x100/FFFFFF/00529D?text=Logo';">
            <h1 class="text-4xl font-bold text-blue-800">Kh√¥ng M·ªôt M√¨nh</h1>
            <p class="text-lg text-blue-600">C√πng nhau an to√†n tr·ª±c tuy·∫øn</p>
        </header>

        <main id="main-content" class="flex-grow flex items-center justify-center">
            <div id="registration-view" class="bg-white p-8 rounded-xl shadow-lg text-center w-full">
                <img id="banner" src="Kmm-01.jpg" alt="Banner Chi·∫øn d·ªãch" class="w-full h-64 object-cover rounded-lg mb-6"
                     onerror="this.onerror=null;this.src='https://placehold.co/800x400/00529D/FFFFFF?text=Banner';">
                <h2 class="text-2xl font-bold mb-4">Tham gia Th·ª≠ th√°ch B·∫£o v·ªá</h2>
                <p class="mb-6">H√£y ƒëi·ªÅn th√¥ng tin ƒë·ªÉ b·∫Øt ƒë·∫ßu b√†i ki·ªÉm tra h√†ng tu·∫ßn v√† t√≠ch lu·ªπ c√∫p nh√©!</p>
                <form id="registration-form" class="space-y-4 max-w-sm mx-auto">
                    <input type="text" id="student-name" placeholder="H·ªç v√† t√™n c·ªßa b·∫°n" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <input type="email" id="student-email" placeholder="Email nh·∫≠n ch·ª©ng nh·∫≠n" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <input type="text" id="student-class" placeholder="L·ªõp" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors">B·∫ÆT ƒê·∫¶U TU·∫¶N 3</button>
                </form>
            </div>

            <div id="theory-view" class="hidden bg-white p-8 rounded-xl shadow-lg w-full">
                <h2 id="theory-title" class="text-2xl font-bold mb-4 text-center">Ki·∫øn th·ª©c Tu·∫ßn 3</h2> <div id="theory-content" class="text-left mb-6 space-y-4 max-h-[60vh] overflow-y-auto pr-4">
                    </div>
                <button id="start-quiz-btn" class="mt-6 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors">ƒê√£ hi·ªÉu, B·∫Øt ƒë·∫ßu l√†m b√†i</button>
            </div>

            <div id="quiz-view" class="hidden bg-white p-8 rounded-xl shadow-lg w-full">
                <h2 id="quiz-title" class="text-2xl font-bold mb-2 text-center">B√†i ki·ªÉm tra Tu·∫ßn 3</h2> <p id="quiz-description" class="text-center mb-6">Ch·ªçn c√¢u tr·∫£ l·ªùi ƒë√∫ng nh·∫•t.</p>
                <div id="quiz-container" class="space-y-6"></div>
                <button id="submit-quiz" class="mt-8 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400">N·ªôp b√†i</button>
            </div>
        </main>
    </div>

    <footer class="text-center py-6 text-sm text-gray-500">
        <p>&copy; 2025 - S·∫£n ph·∫©m thu·ªôc b·∫£n quy·ªÅn c·ªßa tr∆∞·ªùng UK ACADEMY HA LONG</p>
    </footer>

    <div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-md w-full relative transform transition-all scale-95 opacity-0" id="result-content">
            <div id="normal-result-content">
                <h2 id="result-title" class="text-3xl font-bold text-yellow-500 mb-4"></h2>
                <div id="cup-container" class="my-4">
                    <svg class="w-32 h-32 mx-auto text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15h14a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM8 16a2 2 0 114 0H8z"></path><path fill-rule="evenodd" d="M10 0a1 1 0 011 1v.065a8.002 8.002 0 015.657 5.657A1 1 0 0117 8v3.586l1.707 1.707a1 1 0 01-1.414 1.414L16 13.414V8a6.002 6.002 0 00-5-5.917V1a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </div>
                <p id="result-message" class="text-xl font-semibold text-gray-700 my-4"></p>
                <p id="result-score" class="text-lg mb-6"></p>
                <button id="continue-btn-fail" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors mt-4">Ti·∫øp t·ª•c l√†m l·∫°i</button>
            </div>

            <div id="robot-message-content" class="hidden">
                <img src="robot-uka.png" alt="Robot UKA H·∫° Long" class="w-40 h-40 mx-auto mb-4 object-contain"
                     onerror="this.onerror=null;this.src='https://placehold.co/150x150/FFFFFF/00529D?text=Robot';">
                <p id="robot-congrats-text" class="text-xl font-bold text-blue-700 mb-4"></p>
                <div class="flex justify-center space-x-4 mb-4">
                    <button id="share-fb-2" class="bg-blue-800 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Facebook</button>
                    <button id="share-zalo-2" class="bg-blue-500 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Zalo</button>
                </div>
                <button id="continue-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors mt-4">Ti·∫øp t·ª•c</button>
            </div>
            
            <button id="close-modal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
        </div>
    </div>
    
    <canvas id="fireworks-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-50"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script>
        // DOM Elements
        const registrationView = document.getElementById('registration-view');
        const theoryView = document.getElementById('theory-view');
        const quizView = document.getElementById('quiz-view');
        const resultModal = document.getElementById('result-modal');
        const resultContent = document.getElementById('result-content');
        const normalResultContent = document.getElementById('normal-result-content');
        const robotMessageContent = document.getElementById('robot-message-content');
        const registrationForm = document.getElementById('registration-form');
        const quizContainer = document.getElementById('quiz-container');
        const submitQuizBtn = document.getElementById('submit-quiz');
        const closeModalBtn = document.getElementById('close-modal');
        const continueBtn = document.getElementById('continue-btn');
        const continueBtnFail = document.getElementById('continue-btn-fail');
        const fireworksCanvas = document.getElementById('fireworks-canvas');
        const theoryContent = document.getElementById('theory-content');
        const theoryTitle = document.getElementById('theory-title');
        const startQuizBtn = document.getElementById('start-quiz-btn');

        // State
        let studentInfo = { name: '', email: '', class: '' };
        // Gi·ªØ nguy√™n key 'week1' v√¨ ch·ªâ c√≥ 1 b·ªô d·ªØ li·ªáu, nh∆∞ng s·∫Ω g·ª≠i 'week2' sang Apps Script
        let currentQuizKey = 'week1'; 
        let currentQuiz = {};
        let userAnswers = [];
        
        // --- QUIZ DATA ---
        const quizzes = {
            week1: { // D·ªØ li·ªáu v·∫´n gi·ªØ key 'week1' ƒë·ªÉ code hi·ªán t·∫°i ch·∫°y ƒë∆∞·ª£c
                // ===== B·∫ÆT ƒê·∫¶U N·ªòI DUNG THAY TH·∫æ =====
                title: "CH·ª¶ ƒê·ªÄ 3: PH·∫¢N X·∫† AN TO√ÄN", 
                description: "Hi·ªÉu r√µ c√°c t√¨nh hu·ªëng nguy hi·ªÉm v√† Quy t·∫Øc 3B.", 
                theory: `
                    <div class="theory-section">
                        <h4 class="text-xl font-bold mb-3 text-purple-700">C√¢u chuy·ªán th·∫≠t üë©‚Äçüíª üí¨</h4>
                        <p class="mb-4 bg-purple-100 p-3 rounded-lg">M·ªôt bu·ªïi t·ªëi, H. nh·∫≠n ƒë∆∞·ª£c tin nh·∫Øn t·ª´ ng∆∞·ªùi l·∫°: ‚ÄúN·∫øu m√†y kh√¥ng g·ª≠i cho tao 2 tri·ªáu ƒë·ªìng, tao s·∫Ω tung ·∫£nh ri√™ng t∆∞ c·ªßa m√†y l√™n m·∫°ng.‚Äù<br>Ho·∫£ng s·ª£, H. kh√¥ng d√°m n√≥i v·ªõi ai, v·ªôi v√†ng chuy·ªÉn ti·ªÅn. Nh∆∞ng v√†i ng√†y sau, ng∆∞·ªùi ƒë√≥ l·∫°i ti·∫øp t·ª•c ƒë√≤i th√™m. L√∫c n√†y, H. m·ªõi k·ªÉ cho m·∫π v√† gi√°o vi√™n ch·ªß nhi·ªám. Nh·ªù gi·ªØ l·∫°i tin nh·∫Øn, c∆° quan c√¥ng an ƒë√£ truy ra k·∫ª t·ªëng ti·ªÅn.</p>
                        <p class="font-bold">üí≠ Em c√≥ nh·∫≠n ra ƒëi·ªÅu g√¨ sai trong c√°ch ph·∫£n ·ª©ng ban ƒë·∫ßu c·ªßa b·∫°n H. kh√¥ng?</p>
                        <p class="mt-2">üëâ B·∫°n ƒë√£ qu√° s·ª£ h√£i v√† h√†nh ƒë·ªông m·ªôt m√¨nh, khi·∫øn k·∫ª x·∫•u c√†ng l·∫•n t·ªõi. Khi b·ªã ƒëe d·ªça, vi·ªác quan tr·ªçng kh√¥ng ph·∫£i l√† ‚Äúl√†m theo cho xong‚Äù, m√† l√† bi·∫øt ph·∫£n x·∫° an to√†n.</p>
                    </div>

                    <div class="theory-section">
                        <h4 class="text-purple-700">1. Nh·ªØng t√¨nh hu·ªëng nguy hi·ªÉm th∆∞·ªùng g·∫∑p</h4>
                        <p>Kh√¥ng ch·ªâ H., r·∫•t nhi·ªÅu h·ªçc sinh kh√°c c≈©ng c√≥ th·ªÉ tr·ªü th√†nh n·∫°n nh√¢n n·∫øu thi·∫øu c·∫£nh gi√°c. D∆∞·ªõi ƒë√¢y l√† c√°c t√¨nh hu·ªëng ph·ªï bi·∫øn m√† em c·∫ßn nh·∫≠n di·ªán s·ªõm:</p>
                        
                        <h5 class="font-semibold text-purple-600 mt-2">üïµÔ∏è Tin nh·∫Øn ƒëe d·ªça, t·ªëng ti·ªÅn</h5>
                        <p>K·∫ª x·∫•u d√πng ·∫£nh, video, ho·∫∑c th√¥ng tin c√° nh√¢n c·ªßa em ƒë·ªÉ √©p bu·ªôc. Ch√∫ng c√≥ th·ªÉ n√≥i:</p>
                        <ul class="list-disc list-inside space-y-1 pl-4 italic">
                            <li>‚ÄúTao c√≥ ·∫£nh ri√™ng t∆∞ c·ªßa m√†y.‚Äù</li>
                            <li>‚ÄúN·∫øu kh√¥ng g·ª≠i ti·ªÅn, tao s·∫Ω ƒëƒÉng h·∫øt l√™n m·∫°ng.‚Äù</li>
                        </ul>
                        <p class="mt-2"><b>üìé Th·ª±c t·∫ø:</b> C√≥ tr∆∞·ªùng h·ª£p h·ªçc sinh b·ªã d·ª• g·ª≠i ·∫£nh c√° nh√¢n, r·ªìi b·ªã ƒëe d·ªça ƒëƒÉng l√™n m·∫°ng ƒë·ªÉ t·ªëng ti·ªÅn. Nhi·ªÅu b·∫°n s·ª£ h√£i, l√†m theo y√™u c·∫ßu, khi·∫øn t√¨nh h√¨nh nghi√™m tr·ªçng h∆°n.</p>

                        <h5 class="font-semibold text-purple-600 mt-2">üë§ Ng∆∞·ªùi l·∫° gi·∫£ danh ng∆∞·ªùi quen</h5>
                        <p>K·∫ª x·∫•u t·∫°o t√†i kho·∫£n gi·ªëng h·ªát b·∫°n b√® ho·∫∑c gi√°o vi√™n, sau ƒë√≥ nh·∫Øn:</p>
                        <ul class="list-disc list-inside space-y-1 pl-4 italic">
                            <li>‚ÄúCho m√¨nh m∆∞·ª£n ch√∫t ti·ªÅn nh√©.‚Äù</li>
                            <li>‚ÄúC√¥ ƒëang c·∫ßn x√°c minh danh s√°ch h·ªçc sinh, em g·ª≠i m√£ OTP gi√∫p c√¥.‚Äù</li>
                        </ul>
                        <p class="mt-2">üì± N·∫øu em th·∫•y tin nh·∫Øn ‚Äúl·∫° m√† quen‚Äù, h√£y g·ªçi ƒëi·ªán tr·ª±c ti·∫øp ƒë·ªÉ x√°c minh ‚Äì ƒë·ª´ng tin v√†o h√¨nh ƒë·∫°i di·ªán hay t√™n hi·ªÉn th·ªã. C√≥ th·ªÉ ch·ªâ m·∫•t v√†i gi√¢y, nh∆∞ng s·∫Ω c·ª©u em kh·ªèi m·ªôt v·ª• l·ª´a ƒë·∫£o.</p>

                        <h5 class="font-semibold text-purple-600 mt-2">üí¨ B·ªã n√≥i x·∫•u, b√¥i nh·ªç ho·∫∑c x√∫c ph·∫°m tr√™n m·∫°ng</h5>
                        <p>ƒê√¥i khi, c√≥ ng∆∞·ªùi ƒëƒÉng b√†i ch√¢m ch·ªçc, b·ªãa chuy·ªán, ho·∫∑c c·∫Øt gh√©p h√¨nh ·∫£nh c·ªßa em ƒë·ªÉ ch·∫ø gi·ªÖu. Nh·ªØng h√†nh ƒë·ªông ·∫•y ƒë∆∞·ª£c g·ªçi l√† b·∫Øt n·∫°t tr·ª±c tuy·∫øn (cyberbullying).</p>
                        <p class="mt-2">üß† T·ªïn th∆∞∆°ng do b·∫Øt n·∫°t m·∫°ng kh√¥ng nh√¨n th·∫•y b·∫±ng m·∫Øt, nh∆∞ng n√≥ g√¢y ƒëau ƒë·ªõn v√† s·ª£ h√£i th·∫≠t s·ª± ‚Äì gi·ªëng nh∆∞ b·ªã t·ªïn th∆∞∆°ng ngo√†i ƒë·ªùi. N·∫øu g·∫∑p chuy·ªán n√†y, ƒë·ª´ng im l·∫∑ng ‚Äì h√£y t√¨m ng∆∞·ªùi gi√∫p ƒë·ª°.</p>
                    </div>

                    <div class="theory-section">
                        <h4 class="text-purple-700">2. Quy t·∫Øc 3B ‚Äì B√¨nh tƒ©nh ‚Äì B√°o ng∆∞·ªùi l·ªõn ‚Äì B·∫£o l∆∞u ch·ª©ng c·ª©</h4>
                        <p>ƒê√¢y l√† ba b∆∞·ªõc ph·∫£n x·∫° quan tr·ªçng gi√∫p em x·ª≠ l√Ω t√¨nh hu·ªëng nguy hi·ªÉm m·ªôt c√°ch an to√†n v√† th√¥ng minh.</p>

                        <h5 class="font-semibold text-purple-600 mt-2">B∆∞·ªõc 1: B√¨nh tƒ©nh</h5>
                        <p class="font-bold">‚ÄúD·ª´ng l·∫°i, h√≠t s√¢u, nghƒ© k·ªπ.‚Äù</p>
                        <ul class="list-disc list-inside space-y-1 pl-4">
                            <li>Tuy·ªát ƒë·ªëi kh√¥ng tr·∫£ l·ªùi tin nh·∫Øn ƒëe d·ªça, kh√¥ng c√£i l·∫°i, kh√¥ng g·ª≠i ·∫£nh, kh√¥ng chuy·ªÉn ti·ªÅn.</li>
                            <li>K·∫ª x·∫•u th∆∞·ªùng mu·ªën em s·ª£ h√£i ƒë·ªÉ ƒëi·ªÅu khi·ªÉn ‚Äì n√™n vi·ªác gi·ªØ b√¨nh tƒ©nh l√† c√°ch l√†m ch·ªß ƒë·∫ßu ti√™n.</li>
                            <li>ƒê·ªçc k·ªπ tin nh·∫Øn: n·∫øu th·∫•y t·ª´ ng·ªØ ƒëe d·ªça, g·∫•p g√°p, ho·∫∑c k√™u g·ªçi h√†nh ƒë·ªông ngay ‚Äì ƒë√≥ l√† d·∫•u hi·ªáu c·ªßa l·ª´a ƒë·∫£o ho·∫∑c uy hi·∫øp t√¢m l√Ω.</li>
                        </ul>
                        <p class="mt-2"><b>üìç M·∫πo:</b> Khi th·∫•y tim ƒë·∫≠p nhanh, h√£y t·∫Øt m√†n h√¨nh, u·ªëng n∆∞·ªõc, h√≠t s√¢u 3 l·∫ßn ‚Äì r·ªìi m·ªõi nghƒ© ƒë·∫øn b∆∞·ªõc ti·∫øp theo.</p>

                        <h5 class="font-semibold text-purple-600 mt-2">B∆∞·ªõc 2: B√°o ng∆∞·ªùi l·ªõn</h5>
                        <p class="font-bold">‚ÄúKhi s·ª£ h√£i ‚Äì h√£y n√≥i, ƒë·ª´ng gi·∫•u.‚Äù</p>
                        <ul class="list-disc list-inside space-y-1 pl-4">
                            <li>B√°o ngay cho cha m·∫π, gi√°o vi√™n ch·ªß nhi·ªám, t·ªïng ph·ª• tr√°ch ho·∫∑c th·∫ßy c√¥ tin c·∫≠y.</li>
                            <li>N·∫øu t√¨nh hu·ªëng nghi√™m tr·ªçng (ƒëe d·ªça, t·ªëng ti·ªÅn, ph√°t t√°n ·∫£nh ri√™ng t∆∞) ‚Äì g·ªçi ngay 111, ƒë∆∞·ªùng d√¢y n√≥ng qu·ªëc gia b·∫£o v·ªá tr·∫ª em (24/7 ‚Äì mi·ªÖn ph√≠).</li>
                            <li>Tr∆∞·ªùng h·ª£p kh·∫©n c·∫•p: b√°o c√¥ng an ho·∫∑c c∆° quan an ninh m·∫°ng ƒë·ªãa ph∆∞∆°ng.</li>
                        </ul>
                        <p class="mt-2 font-bold">üìû S·ªë c·∫ßn nh·ªõ:</p>
                        <ul class="list-disc list-inside space-y-1 pl-4">
                            <li>111 ‚Äì B·∫£o v·ªá tr·∫ª em</li>
                            <li>113 ‚Äì C·∫£nh s√°t ph·∫£n ·ª©ng nhanh</li>
                            <li>1900 0368 ‚Äì H·ªó tr·ª£ t∆∞ v·∫•n t√¢m l√Ω h·ªçc ƒë∆∞·ªùng</li>
                        </ul>
                        <p class="mt-2 italic">üí¨ Khi em n√≥i ra, em kh√¥ng y·∫øu ƒëu·ªëi ‚Äì m√† l√† ƒëang t·ª± b·∫£o v·ªá m√¨nh.</p>

                        <h5 class="font-semibold text-purple-600 mt-2">B∆∞·ªõc 3: B·∫£o l∆∞u ch·ª©ng c·ª©</h5>
                        <p class="font-bold">‚ÄúGi·ªØ l·∫°i d·∫•u v·∫øt ƒë·ªÉ c√¥ng l√Ω b·∫£o v·ªá em.‚Äù</p>
                        <ul class="list-disc list-inside space-y-1 pl-4">
                            <li>Ch·ª•p m√†n h√¨nh, l∆∞u l·∫°i ƒë∆∞·ªùng link, th·ªùi gian, n·ªôi dung tin nh·∫Øn.</li>
                            <li>Kh√¥ng x√≥a cu·ªôc tr√≤ chuy·ªán, v√¨ ƒë√≥ l√† b·∫±ng ch·ª©ng gi√∫p c√¥ng an ƒëi·ªÅu tra.</li>
                            <li>N·∫øu l√† b√†i vi·∫øt c√¥ng khai, b√°o c√°o (Report) v√† ch·∫∑n t√†i kho·∫£n c·ªßa ng∆∞·ªùi g√¢y h·∫°i.</li>
                        </ul>
                        <p class="mt-2"><b>üìé V√≠ d·ª• th·ª±c t·∫ø:</b> Khi c√≥ ng∆∞·ªùi nh·∫Øn ‚ÄúN·∫øu kh√¥ng g·ª≠i ti·ªÅn, tao tung ·∫£nh m√†y‚Äù, em h√£y ch·ª•p l·∫°i m√†n h√¨nh, ch·∫∑n ng∆∞·ªùi ƒë√≥, v√† b√°o cho th·∫ßy c√¥ ngay. Vi·ªác em l∆∞u gi·ªØ ch·ª©ng c·ª© c√≥ th·ªÉ gi√∫p ngƒÉn ch·∫∑n nhi·ªÅu v·ª• t·ªôi ph·∫°m kh√°c.</p>
                    </div>

                    <div class="theory-section">
                        <h4 class="text-purple-700">3. H·ªó tr·ª£ b·∫°n b√® khi g·∫∑p nguy hi·ªÉm</h4>
                        <p class="font-bold">‚Äúƒê·ª´ng ƒë·ªÉ b·∫°n m√¨nh chi·∫øn ƒë·∫•u m·ªôt m√¨nh tr√™n m·∫°ng.‚Äù</p>
                        <p>N·∫øu em th·∫•y b·∫°n b·ªã x√∫c ph·∫°m, b√¥i nh·ªç hay t·∫•n c√¥ng online:</p>
                        <ul class="list-disc list-inside space-y-1 pl-4">
                            <li>ƒê·ª´ng im l·∫∑ng. Im l·∫∑ng c√≥ th·ªÉ khi·∫øn b·∫°n c·∫£m th·∫•y c√¥ ƒë∆°n.</li>
                            <li>ƒê·ª´ng b√¨nh lu·∫≠n h√πa theo, d√π ch·ªâ l√† ƒë√πa.</li>
                            <li>An ·ªßi b·∫°n, gi√∫p b·∫°n b√°o c√°o b√†i vi·∫øt, h∆∞·ªõng d·∫´n li√™n h·ªá th·∫ßy c√¥ ho·∫∑c ng∆∞·ªùi l·ªõn.</li>
                        </ul>
                        <p class="mt-2 italic">üí¨ M·ªôt l·ªùi h·ªèi han c≈©ng l√† m·ªôt chi·∫øc phao c·ª©u sinh tr√™n m·∫°ng.</p>
                    </div>

                    <div class="theory-section">
                        <h4 class="text-purple-700">4. K·ªπ nƒÉng ph·∫£n x·∫° an to√†n n√¢ng cao</h4>
                        <p>‚ÄúPh·∫£n x·∫° an to√†n‚Äù kh√¥ng ph·∫£i l√† bi·∫øt ƒë√°nh tr·∫£, m√† l√† bi·∫øt b√¨nh tƒ©nh ‚Äì bi·∫øt d·ª´ng l·∫°i ‚Äì bi·∫øt t√¨m ng∆∞·ªùi tr·ª£ gi√∫p ƒë√∫ng l√∫c. Ngo√†i 3B, em c√≥ th·ªÉ √°p d·ª•ng th√™m 3 m·∫πo ‚ÄúSMART‚Äù:</p>
                        <table class="theory-table">
                            <thead>
                                <tr>
                                    <th>K·ªπ nƒÉng</th>
                                    <th>√ù nghƒ©a</th>
                                    <th>·ª®ng d·ª•ng</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>S ‚Äì Stop (D·ª´ng l·∫°i)</td>
                                    <td>Kh√¥ng ph·∫£n ·ª©ng ngay khi ho·∫£ng s·ª£</td>
                                    <td>T·∫Øt ƒëi·ªán tho·∫°i, ra kh·ªèi ·ª©ng d·ª•ng ƒë·ªÉ tr·∫•n tƒ©nh</td>
                                </tr>
                                <tr>
                                    <td>M ‚Äì Move (Chia s·∫ª)</td>
                                    <td>T√¨m ng∆∞·ªùi tin c·∫≠y ƒë·ªÉ k·ªÉ l·∫°i</td>
                                    <td>G·ªçi th·∫ßy c√¥, cha m·∫π, ho·∫∑c b·∫°n th√¢n</td>
                                </tr>
                                <tr>
                                    <td>A ‚Äì Archive (L∆∞u ch·ª©ng c·ª©)</td>
                                    <td>Gi·ªØ m·ªçi h√¨nh ·∫£nh, ƒëo·∫°n chat</td>
                                    <td>Ch·ª•p m√†n h√¨nh, g·ª≠i v√†o th∆∞ m·ª•c an to√†n</td>
                                </tr>
                                <tr>
                                    <td>R ‚Äì Report (B√°o c√°o)</td>
                                    <td>B√°o l√™n m·∫°ng x√£ h·ªôi ho·∫∑c c√¥ng an</td>
                                    <td>D√πng t√≠nh nƒÉng ‚ÄúReport‚Äù, g·ªçi 111</td>
                                </tr>
                                <tr>
                                    <td>T ‚Äì Trust (Tin t∆∞·ªüng)</td>
                                    <td>Tin r·∫±ng m√¨nh c√≥ th·ªÉ ƒë∆∞·ª£c gi√∫p</td>
                                    <td>Kh√¥ng t·ª± ch·ªãu ƒë·ª±ng hay gi·∫•u gi·∫øm</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="mt-4">‚ÄúPh·∫£n x·∫° an to√†n‚Äù kh√¥ng ch·ªâ l√† k·ªπ nƒÉng x·ª≠ l√Ω t√¨nh hu·ªëng, m√† c√≤n l√† s·ª©c m·∫°nh tinh th·∫ßn ‚Äì gi√∫p em gi·ªØ b√¨nh tƒ©nh, s√°ng su·ªët, v√† tin t∆∞·ªüng r·∫±ng m√¨nh kh√¥ng m·ªôt m√¨nh.</p>
                        <ul class="list-disc list-inside space-y-1 pl-4 mt-2 font-semibold">
                            <li>B√¨nh tƒ©nh ƒë·ªÉ kh√¥ng s·∫≠p b·∫´y.</li>
                            <li>B√°o ng∆∞·ªùi l·ªõn ƒë·ªÉ kh√¥ng ƒë∆°n ƒë·ªôc.</li>
                            <li>Gi·ªØ ch·ª©ng c·ª© ƒë·ªÉ b·∫£o v·ªá c√¥ng l√Ω.</li>
                        </ul>
                    </div>
                    
                    <div class="theory-section text-center">
                        <h4 class="text-xl font-bold mt-6 mb-3 text-blue-800">üåà Th√¥ng ƒëi·ªáp tu·∫ßn 3 ‚Äì ‚ÄúPh·∫£n x·∫° an to√†n‚Äù</h4>
                        <p class="mt-2 font-bold text-blue-800 text-lg">‚ÄúKhi g·∫∑p nguy hi·ªÉm ‚Äì h√£y ph·∫£n x·∫° an to√†n, kh√¥ng ph·∫£n ·ª©ng v·ªôi.<br>M·ªói h√†nh ƒë·ªông b√¨nh tƒ©nh l√† m·ªôt t·∫•m khi√™n b·∫£o v·ªá b·∫£n th√¢n v√† ng∆∞·ªùi kh√°c.‚Äù</p>
                    </div>
                `,
                questions: [ 
                    { type: 'mcq', question: "C√¢u 1. Khi nh·∫≠n ƒë∆∞·ª£c tin nh·∫Øn ƒëe d·ªça ‚ÄúN·∫øu kh√¥ng g·ª≠i ti·ªÅn, tao tung ·∫£nh c·ªßa m√†y l√™n m·∫°ng‚Äù, em n√™n l√†m g√¨ ƒë·∫ßu ti√™n?", options: ["A. Tr·∫£ l·ªùi ƒë·ªÉ xin h·ªç x√≥a ·∫£nh", "B. X√≥a tin nh·∫Øn cho ƒë·ª° s·ª£", "C. B√¨nh tƒ©nh, ch·ª•p m√†n h√¨nh l√†m b·∫±ng ch·ª©ng", "D. Chuy·ªÉn ti·ªÅn ƒë·ªÉ tr√°nh b·ªã tung ·∫£nh"], answer: "C. B√¨nh tƒ©nh, ch·ª•p m√†n h√¨nh l√†m b·∫±ng ch·ª©ng" },
                    { type: 'mcq', question: "C√¢u 2. H√†nh ƒë·ªông n√†o sau ƒë√¢y kh√¥ng ƒë√∫ng khi gi√∫p b·∫°n b·ªã n√≥i x·∫•u tr√™n m·∫°ng?", options: ["A. B√°o c√°o b√†i vi·∫øt sai s·ª± th·∫≠t", "B. ƒê·ªông vi√™n, khuy√™n b·∫°n t√¨m ng∆∞·ªùi gi√∫p ƒë·ª°", "C. B√¨nh lu·∫≠n l·∫°i ƒë·ªÉ ‚Äúb√™nh‚Äù b·∫°n b·∫±ng l·ªùi l·∫Ω gay g·∫Øt", "D. Gi·ªØ l·∫°i h√¨nh ·∫£nh l√†m b·∫±ng ch·ª©ng"], answer: "C. B√¨nh lu·∫≠n l·∫°i ƒë·ªÉ ‚Äúb√™nh‚Äù b·∫°n b·∫±ng l·ªùi l·∫Ω gay g·∫Øt" },
                    { type: 'mcq', question: "C√¢u 3. Quy t·∫Øc 3B trong b√†i ‚ÄúPh·∫£n x·∫° an to√†n‚Äù g·ªìm nh·ªØng g√¨?", options: ["A. B√¨nh tƒ©nh ‚Äì B·ªè qua ‚Äì B√°o ng∆∞·ªùi l·∫°", "B. B√¨nh tƒ©nh ‚Äì B√°o ng∆∞·ªùi l·ªõn ‚Äì B·∫£o l∆∞u ch·ª©ng c·ª©", "C. B·ªè ch·∫°y ‚Äì B√°o c√¥ng an ‚Äì B·∫≠t m·∫°ng x√£ h·ªôi", "D. B√¨nh tƒ©nh ‚Äì B·∫£o m·∫≠t ‚Äì B√°o c·∫£nh s√°t"], answer: "B. B√¨nh tƒ©nh ‚Äì B√°o ng∆∞·ªùi l·ªõn ‚Äì B·∫£o l∆∞u ch·ª©ng c·ª©" },
                    { type: 'mcq', question: "C√¢u 4. S·ªë ƒëi·ªán tho·∫°i ƒë∆∞·ªùng d√¢y n√≥ng b·∫£o v·ªá tr·∫ª em m√† h·ªçc sinh c√≥ th·ªÉ g·ªçi khi b·ªã ƒëe d·ªça ho·∫∑c qu·∫•y r·ªëi l√† s·ªë n√†o?", options: ["A. 111", "B. 113", "C. 115", "D. 1900 0368"], answer: "A. 111" },
                    { type: 'mcq', question: "C√¢u 5. V√¨ sao kh√¥ng n√™n x√≥a tin nh·∫Øn ho·∫∑c b√†i vi·∫øt khi b·ªã ƒëe d·ªça, t·ªëng ti·ªÅn?", options: ["A. V√¨ x√≥a s·∫Ω khi·∫øn ng∆∞·ªùi kia t·ª©c gi·∫≠n h∆°n", "B. V√¨ ƒë√≥ l√† b·∫±ng ch·ª©ng quan tr·ªçng ƒë·ªÉ b√°o c∆° quan ch·ª©c nƒÉng", "C. V√¨ m·∫°ng x√£ h·ªôi kh√¥ng cho ph√©p x√≥a tin", "D. V√¨ b·∫°n b√® c√≥ th·ªÉ c·∫ßn xem l·∫°i"], answer: "B. V√¨ ƒë√≥ l√† b·∫±ng ch·ª©ng quan tr·ªçng ƒë·ªÉ b√°o c∆° quan ch·ª©c nƒÉng" }
                ]
                // ===== K·∫æT TH√öC N·ªòI DUNG THAY TH·∫æ =====
            },
        };

        // --- FUNCTIONS ---
        function showView(viewToShow) {
            [registrationView, theoryView, quizView].forEach(view => view.classList.add('hidden'));
            viewToShow.classList.remove('hidden');
        }

        function showTheory(week) {
            currentQuiz = quizzes[week];
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            theoryTitle.textContent = `Ki·∫øn th·ª©c ${currentQuiz.title}`; 
            theoryContent.innerHTML = currentQuiz.theory;
            showView(theoryView);
        }

        function displayQuiz() {
            document.getElementById('quiz-title').textContent = currentQuiz.title; 
            document.getElementById('quiz-description').textContent = currentQuiz.description; 
            quizContainer.innerHTML = '';
            currentQuiz.questions.forEach((q, index) => {
                const qElem = document.createElement('div');
                qElem.className = 'border-b pb-4';
                qElem.id = `question-${index}`;
                qElem.style.display = 'block';

                let contentHTML = `<p class="font-semibold text-lg mb-2">${q.question}</p>`;
                if (q.type === 'mcq') {
                    contentHTML += `<div class="space-y-2">` + q.options.map(opt => `<div class="quiz-option border rounded-lg p-3 cursor-pointer mt-2" data-q-index="${index}" data-option="${opt}">${opt}</div>`).join('') + `</div>`;
                }
                qElem.innerHTML = contentHTML;
                quizContainer.appendChild(qElem);
            });

            document.querySelectorAll('.quiz-option').forEach(el => {
                el.addEventListener('click', e => {
                    const qIndex = parseInt(e.currentTarget.dataset.qIndex);
                    const option = e.currentTarget.dataset.option;
                    userAnswers[qIndex] = option;
                    document.querySelectorAll(`.quiz-option[data-q-index="${qIndex}"]`).forEach(opt => opt.classList.remove('selected'));
                    e.currentTarget.classList.add('selected');
                });
            });
        }


        function submitQuiz() {
            submitQuizBtn.disabled = true;
            quizContainer.classList.add('submitted');
            let score = 0;
            let totalScorable = 0;
            currentQuiz.questions.forEach((q, index) => {
                if (q.type === 'mcq' && q.answer) {
                    totalScorable++;
                    if (userAnswers[index] === q.answer) score++;
                    document.querySelectorAll(`.quiz-option[data-q-index="${index}"]`).forEach(opt => {
                        const optionText = opt.dataset.option;
                        if (optionText === q.answer) opt.classList.add('correct');
                        else if (optionText === userAnswers[index]) opt.classList.add('incorrect');
                    });
                }
            });
            const percentage = totalScorable > 0 ? Math.round((score / totalScorable) * 100) : 100;
            // G·ª≠i 'week2' sang Google Apps Script
            saveDataToGoogleSheets("week2", percentage); 
            setTimeout(() => showResult(percentage), 1500); 
        }

        function showResult(percentage) {
            showView(quizView); 
            resultModal.classList.remove('hidden');
            setTimeout(() => resultContent.classList.remove('scale-95', 'opacity-0'), 100);

            document.getElementById('result-score').innerHTML = `ƒêi·ªÉm tr·∫Øc nghi·ªám: <strong>${percentage}%</strong>`;
            
            const robotCongratsEl = document.getElementById('robot-congrats-text');
            const messageEl = document.getElementById('result-message');
            const titleEl = document.getElementById('result-title');
            const cupContainer = document.getElementById('cup-container');

            // Thay ƒë·ªïi ƒëi·ªÅu ki·ªán th√†nh >= 60
            if (percentage >= 60) { 
                titleEl.textContent = "Xu·∫•t s·∫Øc!";
                cupContainer.style.display = 'block';
                triggerFireworks();
                
                normalResultContent.classList.add('hidden');
                robotMessageContent.classList.remove('hidden');
                robotCongratsEl.textContent = `UKA H·∫° Long ch√∫c m·ª´ng ${studentInfo.name} ƒë√£ v∆∞·ª£t qua th·ª≠ th√°ch v√† ƒë·∫°t ƒë∆∞·ª£c huy hi·ªáu tu·∫ßn ‚ÄúChi·∫øn binh an to√†n s·ªë‚Äù!`;
            } else {
                titleEl.textContent = "C·ªë g·∫Øng h∆°n nh√©!";
                messageEl.textContent = `H√£y √¥n l·∫°i ki·∫øn th·ª©c v√† th·ª≠ l·∫°i nh√©, ${studentInfo.name}!`;
                cupContainer.style.display = 'none';
                normalResultContent.classList.remove('hidden');
                robotMessageContent.classList.add('hidden');
            }
        }

        function triggerFireworks() {
            const duration = 4 * 1000; // Run for 4 seconds
            const animationEnd = Date.now() + duration;
            const myConfetti = confetti.create(fireworksCanvas, {
                resize: true,
                useWorker: true
            });

            const colors = ['#00529D', '#FFD700', '#FFFFFF', '#4169E1', '#FF6347', '#32CD32'];

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                
                myConfetti({
                    startVelocity: 30, spread: 360, ticks: 60, zIndex: 100, particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }, colors: colors
                });
                myConfetti({
                    startVelocity: 30, spread: 360, ticks: 60, zIndex: 100, particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }, colors: colors
                });
            }, 250);
        }
        
        async function saveDataToGoogleSheets(week, score) {
             const scriptURL = 'https://script.google.com/macros/s/AKfycbx7ncf7mNXbsFJFbh_p8bU-AdBC8VYiFROj5cZfS8BLMF6Se2Ksp0zcF_Qj4UaTzgXApQ/exec'; // Link th·∫ßy ƒë√£ cung c·∫•p
            const formData = new FormData();
            formData.append('Hoten', studentInfo.name);
            formData.append('Email', studentInfo.email);
            formData.append('Lop', studentInfo.class);
            formData.append('Tuan', week); // G·ª≠i m√£ tu·∫ßn ('week2')
            formData.append('Diemso', score);
            try {
                 await fetch(scriptURL, { method: 'POST', body: formData });
            } catch (error) {
                console.error('L·ªói khi g·ª≠i d·ªØ li·ªáu:', error.message);
            }
        }
        
        function resetApp() {
            resultModal.classList.add('hidden');
            quizContainer.classList.remove('submitted');
            submitQuizBtn.disabled = false;
            normalResultContent.classList.remove('hidden');
            robotMessageContent.classList.add('hidden');
            showView(registrationView);
        }

        function retryFromTheory() {
            resultModal.classList.add('hidden');
            quizContainer.classList.remove('submitted');
            submitQuizBtn.disabled = false;
            // Lu√¥n quay l·∫°i 'week1' v√¨ ƒë√≥ l√† key duy nh·∫•t ch·ª©a n·ªôi dung
            showTheory('week1'); 
        }

        // --- EVENT LISTENERS ---
        registrationForm.addEventListener('submit', (e) => {
            e.preventDefault();
            studentInfo.name = document.getElementById('student-name').value;
            studentInfo.email = document.getElementById('student-email').value;
            studentInfo.class = document.getElementById('student-class').value;
            if (!studentInfo.name || !studentInfo.email || !studentInfo.class) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.');
                return;
            }
            // Lu√¥n hi·ªÉn th·ªã n·ªôi dung c·ªßa 'week1' v√¨ ƒë√£ g·ªôp
            showTheory('week1'); 
        });

        startQuizBtn.addEventListener('click', () => {
            showView(quizView);
            displayQuiz();
        });

        submitQuizBtn.addEventListener('click', submitQuiz);
        closeModalBtn.addEventListener('click', resetApp);
        continueBtn.addEventListener('click', resetApp);
        continueBtnFail.addEventListener('click', retryFromTheory);

        const shareOnFacebook = () => {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`"${studentInfo.name}" ƒë√£ ƒë·∫°t danh hi·ªáu "Chi·∫øn binh an to√†n s·ªë" trong chi·∫øn d·ªãch Kh√¥ng M·ªôt M√¨nh!`);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        };
        
        const shareOnZalo = () => {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://zalo.me/share/link?url=${url}`, '_blank');
        };
        
        document.querySelectorAll('#share-fb-2').forEach(btn => btn.addEventListener('click', shareOnFacebook));
        document.querySelectorAll('#share-zalo-2').forEach(btn => btn.addEventListener('click', shareOnZalo));

    </script>
</body>
</html>


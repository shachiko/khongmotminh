<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√¥ng M·ªôt M√¨nh ‚Äì C√πng nhau an to√†n tr·ª±c tuy·∫øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .quiz-option:hover {
            background-color: #DBEAFE; /* Light blue on hover */
        }
        .quiz-option.selected {
            background-color: #93C5FD; /* Darker blue when selected */
            border-color: #2563EB;
        }
        /* Style for correct answer */
        .quiz-option.correct {
            background-color: #D1FAE5; /* Green-100 */
            border-color: #059669; /* Green-600 */
            color: #047857; /* Green-700 */
            font-weight: bold;
        }
        /* Style for incorrect answer */
        .quiz-option.incorrect {
            background-color: #FEE2E2; /* Red-100 */
            border-color: #E11D48; /* Rose-600 */
            color: #BE123C; /* Rose-700 */
        }
        /* Disable clicks after submission */
        #quiz-container.submitted .quiz-option {
            pointer-events: none;
            cursor: default;
        }
    </style>
</head>
<body class="bg-blue-50 text-gray-800 flex flex-col min-h-screen">

    <div id="app" class="container mx-auto p-4 max-w-4xl flex flex-col flex-grow">

        <!-- Header --><header class="text-center my-8">
            <img id="logo" src="https://placehold.co/100x100/FFFFFF/00529D?text=Logo" alt="Logo Kh√¥ng M·ªôt M√¨nh" class="w-20 h-20 mx-auto mb-4 rounded-full"
                 onerror="this.onerror=null;this.src='https://placehold.co/100x100/FFFFFF/00529D?text=Logo';">
            <h1 class="text-4xl font-bold text-blue-800">Kh√¥ng M·ªôt M√¨nh</h1>
            <p class="text-lg text-blue-600">C√πng nhau an to√†n tr·ª±c tuy·∫øn</p>
        </header>

        <main id="main-content" class="flex-grow flex items-center justify-center">
            <!-- Registration View --><div id="registration-view" class="bg-white p-8 rounded-xl shadow-lg text-center w-full">
                 <img id="banner" src="https://placehold.co/800x400/00529D/FFFFFF?text=Chi·∫øn+d·ªãch+Kh√¥ng+M·ªôt+M√¨nh" alt="Banner Chi·∫øn d·ªãch" class="w-full h-64 object-cover rounded-lg mb-6"
                       onerror="this.onerror=null;this.src='https://placehold.co/800x400/00529D/FFFFFF?text=Banner';">
                <h2 class="text-2xl font-bold mb-4">Tham gia Th·ª≠ th√°ch B·∫£o v·ªá</h2>
                <p class="mb-6">H√£y ƒëi·ªÅn th√¥ng tin ƒë·ªÉ b·∫Øt ƒë·∫ßu b√†i ki·ªÉm tra h√†ng tu·∫ßn v√† t√≠ch lu·ªπ c√∫p nh√©!</p>
                <form id="registration-form" class="space-y-4 max-w-sm mx-auto">
                    <input type="text" id="student-name" placeholder="H·ªç v√† t√™n c·ªßa b·∫°n" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <input type="email" id="student-email" placeholder="Email nh·∫≠n ch·ª©ng nh·∫≠n" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors">B·∫ÆT ƒê·∫¶U TU·∫¶N 1</button>
                </form>
            </div>

            <!-- Theory View --><div id="theory-view" class="hidden bg-white p-8 rounded-xl shadow-lg w-full">
                <h2 id="theory-title" class="text-2xl font-bold mb-4 text-center">Ki·∫øn th·ª©c Tu·∫ßn 1</h2>
                <div id="theory-content" class="text-left mb-6 space-y-4 max-h-[60vh] overflow-y-auto pr-4">
                    <!-- Theory content will be dynamically inserted here -->
                </div>
                <button id="start-quiz-btn" class="mt-6 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors">ƒê√£ hi·ªÉu, B·∫Øt ƒë·∫ßu l√†m b√†i</button>
            </div>

            <!-- Quiz View --><div id="quiz-view" class="hidden bg-white p-8 rounded-xl shadow-lg w-full">
                <h2 id="quiz-title" class="text-2xl font-bold mb-2 text-center">B√†i ki·ªÉm tra Tu·∫ßn 1</h2>
                <p id="quiz-description" class="text-center mb-6">Ch·ªçn c√¢u tr·∫£ l·ªùi ƒë√∫ng nh·∫•t cho c√°c c√¢u h·ªèi d∆∞·ªõi ƒë√¢y.</p>
                <div id="quiz-container" class="space-y-6">
                    <!-- Questions will be dynamically inserted here --></div>
                <button id="submit-quiz" class="mt-8 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400">N·ªôp b√†i</button>
            </div>
        </main>
    </div>

    <!-- Footer --><footer class="text-center py-6 text-sm text-gray-500">
        <p>&copy; 2025 - S·∫£n ph·∫©m thu·ªôc b·∫£n quy·ªÅn c·ªßa tr∆∞·ªùng UK ACADEMY HA LONG</p>
    </footer>

    <!-- Result Modal --><div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-md w-full relative transform transition-all scale-95 opacity-0" id="result-content">
            <!-- Normal Result Content --><div id="normal-result-content">
                <h2 id="result-title" class="text-3xl font-bold text-yellow-500 mb-4">Ch√∫c m·ª´ng!</h2>
                <div id="cup-container" class="my-4">
                    <svg class="w-32 h-32 mx-auto text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15h14a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM8 16a2 2 0 114 0H8z"></path><path fill-rule="evenodd" d="M10 0a1 1 0 011 1v.065a8.002 8.002 0 015.657 5.657A1 1 0 0117 8v3.586l1.707 1.707a1 1 0 01-1.414 1.414L16 13.414V8a6.002 6.002 0 00-5-5.917V1a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </div>
                <p id="result-message" class="text-xl font-semibold text-gray-700 my-4">B·∫°n l√† ng∆∞·ªùi b·∫£o v·ªá tuy·ªát v·ªùi!</p>
                <p id="result-score" class="text-lg mb-6">ƒêi·ªÉm s·ªë c·ªßa b·∫°n: <strong>100%</strong></p>
                <div class="flex justify-center space-x-4">
                    <button id="share-fb" class="bg-blue-800 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Facebook</button>
                    <button id="share-zalo" class="bg-blue-500 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Zalo</button>
                </div>
            </div>

            <!-- Robot Message Content (Initially hidden) --><div id="robot-message-content" class="hidden mt-6">
                <img src="robot-uka.png" alt="Robot UKA H·∫° Long" class="w-40 h-40 mx-auto mb-4 object-contain"
                     onerror="this.onerror=null;this.src='https://placehold.co/150x150/FFFFFF/00529D?text=Robot';">
                <p id="robot-congrats-text" class="text-xl font-bold text-blue-700 mb-4">UKA H·∫° Long ch√∫c m·ª´ng b·∫°n v∆∞·ª£t qua th·ª≠ th√°ch v√† ƒë·∫°t ƒë∆∞·ª£c huy hi·ªáu tu·∫ßn ‚ÄúChi·∫øn binh an to√†n s·ªë‚Äù!</p>
                <div class="flex justify-center space-x-4 mb-4">
                    <button id="share-fb-2" class="bg-blue-800 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Facebook</button>
                    <button id="share-zalo-2" class="bg-blue-500 text-white font-bold py-2 px-5 rounded-lg">Chia s·∫ª Zalo</button>
                </div>
                <button id="continue-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors mt-4">Ti·∫øp t·ª•c</button>
            </div>
            
            <button id="close-modal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
        </div>
    </div>
    
    <!-- Canvas for fireworks --><canvas id="fireworks-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-50"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script>
        const registrationView = document.getElementById('registration-view');
        const theoryView = document.getElementById('theory-view');
        const quizView = document.getElementById('quiz-view');
        const resultModal = document.getElementById('result-modal');
        const resultContent = document.getElementById('result-content');
        const normalResultContent = document.getElementById('normal-result-content');
        const robotMessageContent = document.getElementById('robot-message-content');
        const registrationForm = document.getElementById('registration-form');
        const quizContainer = document.getElementById('quiz-container');
        const submitQuizBtn = document.getElementById('submit-quiz');
        const closeModalBtn = document.getElementById('close-modal');
        const continueBtn = document.getElementById('continue-btn'); // N√∫t Ti·∫øp t·ª•c c·ªßa robot
        const fireworksCanvas = document.getElementById('fireworks-canvas');
        const theoryContent = document.getElementById('theory-content');
        const theoryTitle = document.getElementById('theory-title');
        const startQuizBtn = document.getElementById('start-quiz-btn');

        let studentName = '';
        let studentEmail = '';
        let currentQuiz = {};
        let userAnswers = [];
        let quizScorePercentage = 0; // Bi·∫øn l∆∞u ƒëi·ªÉm ph·∫ßn trƒÉm

        // --- D·ªÆ LI·ªÜU B√ÄI KI·ªÇM TRA (Th·∫ßy s·∫Ω t·ª± thay ƒë·ªïi h√†ng tu·∫ßn) ---
        const quizzes = {
            week1: {
                title: "CH·ª¶ ƒê·ªÄ 1: B·∫¢O V·ªÜ C√Å NH√ÇN",
                description: "Nh·∫≠n bi·∫øt c√°c t√¨nh hu·ªëng nguy hi·ªÉm tr√™n m·∫°ng.",
                theory: `
                    <h4 class="text-xl font-bold mb-3 text-blue-700">C√°c em h√£y ƒë·ªçc c√¢u chuy·ªán d∆∞·ªõi ƒë√¢y</h4>
                    <p class="mb-4 bg-blue-100 p-3 rounded-lg">M·ªôt bu·ªïi chi·ªÅu, Lan ƒëƒÉng l√™n m·∫°ng t·∫•m ·∫£nh th·∫ª h·ªçc sinh m·ªõi ch·ª•p. ·∫¢nh c√≥ t√™n, tr∆∞·ªùng v√† m√£ s·ªë h·ªçc sinh. V√†i ph√∫t sau, m·ªôt ng∆∞·ªùi l·∫° nh·∫Øn tin: ‚ÄúCh√†o em, ch·ªã l√† nh√¢n vi√™n h·ªçc b·ªïng. Em g·ª≠i th√™m s·ªë CCCD ƒë·ªÉ nh·∫≠n qu√† nh√©!‚Äù. Lan vui v·∫ª l√†m theo. Ch·ªâ m·ªôt ng√†y sau, t√†i kho·∫£n c·ªßa Lan b·ªã chi·∫øm. H√†ng ch·ª•c b·∫°n b√® nh·∫≠n tin nh·∫Øn vay ti·ªÅn t·ª´ ‚ÄúLan gi·∫£‚Äù.</p>
                    <p class="font-bold">üí≠ Theo em, Lan ƒë√£ m·∫Øc sai l·∫ßm ·ªü ƒë√¢u?</p>
                    
                    <h4 class="text-xl font-bold mt-6 mb-3 text-blue-700">1. V√¨ sao c·∫ßn b·∫£o v·ªá b·∫£n th√¢n tr√™n m·∫°ng?</h4>
                    <p>M·∫°ng Internet gi·ªëng nh∆∞ m·ªôt ng√¥i nh√† r·ªông l·ªõn, n∆°i ai c≈©ng c√≥ th·ªÉ gh√© thƒÉm. N·∫øu ngo√†i ƒë·ªùi em kh√¥ng ƒë∆∞a ch√¨a kh√≥a nh√† cho ng∆∞·ªùi l·∫°, th√¨ tr√™n m·∫°ng, vi·ªác chia s·∫ª th√¥ng tin c√° nh√¢n m√† kh√¥ng c·∫©n tr·ªçng c≈©ng nguy hi·ªÉm y nh∆∞ v·∫≠y. K·∫ª x·∫•u c√≥ th·ªÉ d√πng th√¥ng tin ƒë√≥ ƒë·ªÉ l·ª´a ƒë·∫£o, ƒëe d·ªça ho·∫∑c gi·∫£ m·∫°o em. Gi·ªØ b√≠ m·∫≠t th√¥ng tin ch√≠nh l√† gi·ªØ an to√†n cho ch√≠nh m√¨nh.</p>
                    <p class="italic text-blue-600">üå± Tr√™n m·∫°ng, m·ªói th√¥ng tin nh·ªè ƒë·ªÅu c√≥ th·ªÉ tr·ªü th√†nh ‚Äúd·∫•u v·∫øt s·ªë‚Äù.</p>
                    
                    <h4 class="text-xl font-bold mt-6 mb-3 text-blue-700">2. Th√¥ng tin c√° nh√¢n l√† g√¨?</h4>
                    <p>üß© Th√¥ng tin c√° nh√¢n l√† nh·ªØng d·ªØ li·ªáu gi√∫p ng∆∞·ªùi kh√°c nh·∫≠n bi·∫øt ho·∫∑c x√°c ƒë·ªãnh em l√† ai. Ch√∫ng c√≥ th·ªÉ l√†:</p>
                    <ul class="list-disc list-inside space-y-1 pl-4">
                        <li>H·ªç t√™n, ng√†y sinh, ƒë·ªãa ch·ªâ, s·ªë ƒëi·ªán tho·∫°i;</li>
                        <li>·∫¢nh c√° nh√¢n, m√£ h·ªçc sinh, t√†i kho·∫£n m·∫°ng x√£ h·ªôi;</li>
                        <li>Email, m·∫≠t kh·∫©u, v·ªã tr√≠, l·ªãch h·ªçc.</li>
                    </ul>
                    <p class="mt-2 italic text-red-600">üì∏ V√≠ d·ª•: M·ªôt b·∫°n ƒëƒÉng ·∫£nh th·∫ª h·ªçc sinh c√≥ ghi t√™n v√† tr∆∞·ªùng. Ng∆∞·ªùi l·∫° c√≥ th·ªÉ d·ªÖ d√†ng t√¨m ra ƒë·ªãa ch·ªâ ch·ªâ b·∫±ng v√†i c√∫ t√¨m ki·∫øm!</p>

                    <h4 class="text-xl font-bold mt-6 mb-3 text-blue-700">3. Gi·ªØ an to√†n cho t√†i kho·∫£n</h4>
                    <p>üîë M·∫≠t kh·∫©u m·∫°nh l√† l·ªõp kh√≥a ƒë·∫ßu ti√™n. M·ªôt m·∫≠t kh·∫©u an to√†n c·∫ßn:</p>
                     <ul class="list-disc list-inside space-y-1 pl-4">
                        <li>√çt nh·∫•t 8 k√Ω t·ª±, g·ªìm ch·ªØ hoa ‚Äì ch·ªØ th∆∞·ªùng ‚Äì s·ªë ‚Äì k√Ω t·ª± ƒë·∫∑c bi·ªát.</li>
                        <li>D·ªÖ nh·ªõ v·ªõi em, nh∆∞ng kh√≥ ƒëo√°n v·ªõi ng∆∞·ªùi kh√°c.</li>
                    </ul>
                    <p class="mt-2">‚úÖ V√≠ d·ª•: Uka@2025!, HaLong#9x!</p>
                    <p>üö´ Tr√°nh: 123456, uka2025, ng√†y sinh.</p>
                    <p class="italic text-blue-600">üí¨ M·∫πo nh·ªè: H√£y bi·∫øn m·ªôt c√¢u quen thu·ªôc th√†nh m·∫≠t kh·∫©u! ‚ÄúUKA l√† ng√¥i tr∆∞·ªùng tuy·ªát v·ªùi‚Äù ‚Üí UkaLaNgT@2025</p>
                    <p class="mt-4">üì± X√°c th·ª±c hai l·ªõp (2FA) ‚Äì l·ªõp kh√≥a th·ª© hai. Ngay c·∫£ khi k·∫ª x·∫•u bi·∫øt m·∫≠t kh·∫©u, h·ªç v·∫´n kh√¥ng th·ªÉ v√†o t√†i kho·∫£n n·∫øu em b·∫≠t x√°c th·ª±c hai b∆∞·ªõc. Khi ƒëƒÉng nh·∫≠p, em s·∫Ω nh·∫≠n ƒë∆∞·ª£c m√£ OTP qua ƒëi·ªán tho·∫°i ho·∫∑c email.</p>
                    <p class="font-bold text-green-700">üí° H√£y b·∫≠t t√≠nh nƒÉng ‚ÄúX√°c th·ª±c hai l·ªõp‚Äù trong ph·∫ßn B·∫£o m·∫≠t c·ªßa Zalo, Facebook, TikTok hay Gmail. ƒê√¢y l√† ‚Äúl√° ch·∫Øn k√©p‚Äù cho t√†i kho·∫£n c·ªßa em!</p>
                    
                    <h4 class="text-xl font-bold mt-6 mb-3 text-blue-700">4. C√†i ƒë·∫∑t quy·ªÅn ri√™ng t∆∞</h4>
                    <p>Kh√¥ng ph·∫£i ai c≈©ng n√™n th·∫•y b√†i ƒëƒÉng c·ªßa em.</p>
                    <ul class="list-disc list-inside space-y-1 pl-4">
                        <li>Ch·ªâ ƒë·ªÉ b·∫°n b√® th·∫≠t xem b√†i vi·∫øt.</li>
                        <li>Kh√¥ng c√¥ng khai h√¨nh ·∫£nh gia ƒë√¨nh hay ƒë·ªãa ch·ªâ nh√†.</li>
                        <li>Khi ƒëƒÉng ·∫£nh nh√≥m, xin ph√©p c√°c b·∫°n tr∆∞·ªõc.</li>
                    </ul>
                    <p class="mt-2 italic text-red-600">üìç V√≠ d·ª•: M·ªôt b·∫°n g·∫Øn v·ªã tr√≠ ‚ÄúTr∆∞·ªùng UKA H·∫° Long‚Äù d∆∞·ªõi m·ªói b√†i ƒëƒÉng. ‚Üí Ng∆∞·ªùi l·∫° c√≥ th·ªÉ bi·∫øt th·ªùi gian h·ªçc, v·ªã tr√≠ l·ªõp h·ªçc ‚Äì g√¢y nguy c∆° b·ªã theo d√µi.</p>
                    <p class="mt-2 font-bold">üß† G·ª£i √Ω: Tr∆∞·ªõc khi ƒëƒÉng b·∫•t k·ª≥ h√¨nh ·∫£nh n√†o, h√£y t·ª± h·ªèi: ‚ÄúN·∫øu c·∫£ th·∫ø gi·ªõi nh√¨n th·∫•y ƒëi·ªÅu n√†y, m√¨nh c√≥ th·∫•y tho·∫£i m√°i kh√¥ng?‚Äù</p>

                    <h4 class="text-xl font-bold mt-6 mb-3 text-blue-700">5. T√¥n tr·ªçng ng∆∞·ªùi kh√°c ‚Äì c≈©ng l√† b·∫£o v·ªá ch√≠nh m√¨nh</h4>
                    <p>Khi s·ª≠ d·ª•ng m·∫°ng x√£ h·ªôi, m·ªói em kh√¥ng ch·ªâ gi·ªØ an to√†n cho b·∫£n th√¢n m√† c√≤n g√≥p ph·∫ßn x√¢y d·ª±ng m√¥i tr∆∞·ªùng m·∫°ng l√†nh m·∫°nh.</p>
                     <ul class="list-disc list-inside space-y-1 pl-4">
                        <li>Kh√¥ng chia s·∫ª, b√¨nh lu·∫≠n √°c √Ω hay tin gi·∫£.</li>
                        <li>Kh√¥ng ƒëƒÉng ·∫£nh b·∫°n b√® khi ch∆∞a ƒë∆∞·ª£c ƒë·ªìng √Ω.</li>
                        <li>Kh√¥ng ph√°t t√°n n·ªôi dung nh·∫°y c·∫£m, d√π ch·ªâ ‚Äúcho vui‚Äù.</li>
                    </ul>
                    <p class="mt-2 italic text-blue-600">üåº H√£y l√† ng∆∞·ªùi d√πng m·∫°ng vƒÉn minh, bi·∫øt t√¥n tr·ªçng quy·ªÅn ri√™ng t∆∞ ‚Äì v√¨ an to√†n tr·ª±c tuy·∫øn l√† an to√†n c·ªßa c·∫£ c·ªông ƒë·ªìng.</p>

                    <h4 class="text-xl font-bold mt-6 mb-3 text-green-700">üåà Em c·∫ßn ghi nh·ªõ</h4>
                     <ul class="list-disc list-inside space-y-1 pl-4 font-semibold">
                        <li>Kh√¥ng chia s·∫ª th√¥ng tin c√° nh√¢n t√πy ti·ªán.</li>
                        <li>S·ª≠ d·ª•ng m·∫≠t kh·∫©u m·∫°nh v√† b·∫≠t x√°c th·ª±c hai l·ªõp.</li>
                        <li>C√†i ƒë·∫∑t quy·ªÅn ri√™ng t∆∞, kh√¥ng g·∫Øn v·ªã tr√≠ th·∫≠t.</li>
                        <li>T√¥n tr·ªçng quy·ªÅn ri√™ng t∆∞ c·ªßa ng∆∞·ªùi kh√°c.</li>
                    </ul>
                    <p class="mt-4 font-bold text-center text-lg">üíñ An to√†n tr√™n m·∫°ng b·∫Øt ƒë·∫ßu t·ª´ ch√≠nh √Ω th·ª©c c·ªßa m·ªói ng∆∞·ªùi. üíñ</p>
                    <p class="mt-4 text-center font-bold text-blue-800 text-lg">üîê ‚ÄúH√£y kh√≥a an to√†n cho d·ªØ li·ªáu ‚Äì m·ªü r·ªông k·∫øt n·ªëi b·∫±ng s·ª± t·ª≠ t·∫ø.‚Äù</p>
                    <p>M·ªói h·ªçc sinh UKA l√† m·ªôt ng∆∞·ªùi g√°c c·ªïng s·ªë, c√πng nhau gi·ªØ m√¥i tr∆∞·ªùng m·∫°ng an to√†n, nh√¢n vƒÉn, kh√¥ng m·ªôt m√¨nh. B√†i h·ªçc n√†y l√† b∆∞·ªõc ƒë·∫ßu ti√™n trong h√†nh tr√¨nh x√¢y d·ª±ng ‚ÄúKh√°ng th·ªÉ s·ªë‚Äù c·ªßa m·ªói h·ªçc sinh UKA.</p>
                    <p>H√£y c√πng tham gia:</p>
                    <ul class="list-disc list-inside space-y-1 pl-4">
                        <li>Ho√†n th√†nh quiz ‚ÄúB·∫£o v·ªá c√° nh√¢n ‚Äì Kh√°ng th·ªÉ s·ªë c·∫•p 1‚Äù.</li>
                        <li>ƒê·ªïi avatar chi·∫øn d·ªãch.</li>
                        <li>Check-in x√°c nh·∫≠n ƒë√£ b·∫≠t x√°c th·ª±c hai l·ªõp v√† ki·ªÉm tra quy·ªÅn ri√™ng t∆∞ tr√™n t√†i kho·∫£n m·∫°ng x√£ h·ªôi c√° nh√¢n.</li>
                        <li>ƒêƒÉng th√¥ng ƒëi·ªáp c·ªßa l·ªõp v·ªõi hashtag #KhongMotMinh #Niemtinso #CungNhauAnToanTrucTuyen #UKAcademyHaLong</li>
                    </ul>
                    <p class="mt-4 font-bold">H√£y ƒë·ªçc k·ªπ ƒë·ªÉ s·∫µn s√†ng cho th·ª≠ th√°ch nh√©!</p>
                `,
                questions: [
                    {
                        type: 'mcq',
                        question: "C√¢u 1: M·∫≠t kh·∫©u n√†o an to√†n nh·∫•t?",
                        options: [
                            "A. ukahalong123",
                            "B. 12345678",
                            "C. Uka@2025!",
                            "D. halonguka"
                        ],
                        answer: "C. Uka@2025!"
                    },
                    {
                        type: 'mcq',
                        question: "C√¢u 2: Khi ng∆∞·ªùi l·∫° xin ·∫£nh c√° nh√¢n, em n√™n:",
                        options: [
                            "A. G·ª≠i ngay",
                            "B. Chia s·∫ª qua nick ph·ª•",
                            "C. T·ª´ ch·ªëi v√† b√°o cho GVCN/cha m·∫π",
                            "D. Xo√° tin nh·∫Øn"
                        ],
                        answer: "C. T·ª´ ch·ªëi v√† b√°o cho GVCN/cha m·∫π"
                    },
                    {
                        type: 'mcq',
                        question: "C√¢u 3: ‚ÄúX√°c th·ª±c hai l·ªõp‚Äù gi√∫p:",
                        options: [
                            "A. ƒêƒÉng nh·∫≠p nhanh h∆°n",
                            "B. NgƒÉn ng∆∞·ªùi l·∫° truy c·∫≠p d√π bi·∫øt m·∫≠t kh·∫©u",
                            "C. Gi·ªØ m·∫≠t kh·∫©u ng·∫Øn",
                            "D. L∆∞u m·∫≠t kh·∫©u t·ª± ƒë·ªông"
                        ],
                        answer: "B. NgƒÉn ng∆∞·ªùi l·∫° truy c·∫≠p d√π bi·∫øt m·∫≠t kh·∫©u"
                    },
                    {
                        type: 'mcq',
                        question: "C√¢u 4: Khi ƒëƒÉng ·∫£nh nh√≥m b·∫°n c·∫ßn:",
                        options: [
                            "A. ƒêƒÉng t·ª± do",
                            "B. Tag h·∫øt b·∫°n",
                            "C. Xin ph√©p tr∆∞·ªõc khi ƒëƒÉng",
                            "D. Kh√¥ng c·∫ßn v√¨ l√† b·∫°n"
                        ],
                        answer: "C. Xin ph√©p tr∆∞·ªõc khi ƒëƒÉng"
                    },
                    {
                        type: 'mcq',
                        question: "C√¢u 5: Khi ph√°t hi·ªán ai ƒë√≥ gi·∫£ m·∫°o t√†i kho·∫£n c·ªßa m√¨nh:",
                        options: [
                            "A. B·ªè qua",
                            "B. B√°o c√°o v√† ƒë·ªïi m·∫≠t kh·∫©u",
                            "C. Vi·∫øt status c·∫£nh b√°o",
                            "D. T·∫°o t√†i kho·∫£n m·ªõi"
                        ],
                        answer: "B. B√°o c√°o v√† ƒë·ªïi m·∫≠t kh·∫©u"
                    },
                    {
                        type: 'mcq',
                        question: "C√¢u 6: Em c√≥ ƒëang s·ª≠ d·ª•ng t√†i kho·∫£n m·∫°ng x√£ h·ªôi kh√¥ng?",
                        options: [
                            "A. C√≥",
                            "B. Kh√¥ng"
                        ],
                        answer: null // This question is for logic, not scoring
                    },
                    {
                        type: 'file',
                        question: "C√¢u 7.1: Tuy·ªát v·ªùi! H√£y ch·ª•p ·∫£nh m√†n h√¨nh minh ch·ª©ng em ƒë√£ b·∫≠t x√°c th·ª±c b·∫£o m·∫≠t t√†i kho·∫£n 2 l·ªõp v√† t·∫£i l√™n ƒë√¢y nh√©.",
                        condition: { questionIndex: 5, answer: "A. C√≥" } // Condition based on question 6 (index 5)
                    },
                    {
                        type: 'checkbox',
                        question: "C√¢u 7.2: Em h√£y ƒë·ªçc k·ªπ l·∫°i c√°c ki·∫øn th·ª©c v·ªÅ b·∫£o m·∫≠t 2 l·ªõp v√† x√°c nh·∫≠n ƒë√£ hi·ªÉu r√µ th√¥ng tin nh√©.",
                        condition: { questionIndex: 5, answer: "B. Kh√¥ng" } // Condition based on question 6 (index 5)
                    }
                ]
            },
            // Th·∫ßy c√≥ th·ªÉ th√™m week2, week3... ·ªü ƒë√¢y
        };

        // --- C√ÅC H√ÄM X·ª¨ L√ù ---

        function showTheory(week) {
            currentQuiz = quizzes[week];
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            theoryTitle.textContent = `Ki·∫øn th·ª©c ${currentQuiz.title}`;
            theoryContent.innerHTML = currentQuiz.theory;
            registrationView.classList.add('hidden');
            theoryView.classList.remove('hidden');
        }

        function displayQuiz() {
            document.getElementById('quiz-title').textContent = currentQuiz.title;
            document.getElementById('quiz-description').textContent = currentQuiz.description;
            quizContainer.innerHTML = '';

            currentQuiz.questions.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'border-b pb-4';
                questionElement.id = `question-${index}`;

                // Hide conditional questions initially
                if (q.condition) {
                    questionElement.classList.add('hidden');
                }

                let contentHTML = `<p class="font-semibold text-lg mb-2">${q.question}</p>`;
                
                if (q.type === 'mcq') {
                    contentHTML += `<div class="space-y-2">` + q.options.map(option => `
                        <div class="quiz-option border rounded-lg p-3 cursor-pointer mt-2" data-q-index="${index}" data-option="${option}">
                            ${option}
                        </div>
                    `).join('') + `</div>`;
                } else if (q.type === 'file') {
                    contentHTML += `<input type="file" class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"/>`;
                } else if (q.type === 'checkbox') {
                    contentHTML += `<label class="flex items-center space-x-3 cursor-pointer"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"/> <span class="text-gray-700">T√¥i x√°c nh·∫≠n ƒë√£ hi·ªÉu v√† n·∫Øm r√µ th√¥ng tin.</span></label>`;
                }

                questionElement.innerHTML = contentHTML;
                quizContainer.appendChild(questionElement);
            });
            
            // Add event listeners for options
            document.querySelectorAll('.quiz-option').forEach(el => {
                el.addEventListener('click', (e) => {
                    const qIndex = parseInt(e.currentTarget.dataset.qIndex);
                    const option = e.currentTarget.dataset.option;
                    userAnswers[qIndex] = option;
                    
                    // Highlight selected option
                    document.querySelectorAll(`.quiz-option[data-q-index="${qIndex}"]`).forEach(opt => opt.classList.remove('selected'));
                    e.currentTarget.classList.add('selected');
                    
                    // Handle conditional logic for question 6 (index 5)
                    if (qIndex === 5) {
                        handleConditionalQuestions(option);
                    }
                });
            });
        }

        function handleConditionalQuestions(answer) {
            currentQuiz.questions.forEach((q, index) => {
                if (q.condition) {
                    const questionElement = document.getElementById(`question-${index}`);
                    if (q.condition.questionIndex === 5 && q.condition.answer === answer) {
                        questionElement.classList.remove('hidden');
                    } else {
                        questionElement.classList.add('hidden');
                    }
                }
            });
        }
        
        function submitQuiz() {
            submitQuizBtn.disabled = true;
            quizContainer.classList.add('submitted');

            let score = 0;
            let totalScorableQuestions = 0;

            currentQuiz.questions.forEach((q, index) => {
                // Only score MCQ questions that have an answer
                if (q.type === 'mcq' && q.answer) {
                    totalScorableQuestions++;
                    const userAnswer = userAnswers[index];
                    const correctAnswer = q.answer;

                    if (userAnswer === correctAnswer) {
                        score++;
                    }
                    
                    const optionsForQuestion = document.querySelectorAll(`.quiz-option[data-q-index="${index}"]`);
                    optionsForQuestion.forEach(opt => {
                        const optionText = opt.dataset.option;
                        if (optionText === correctAnswer) {
                            opt.classList.add('correct');
                        } else if (optionText === userAnswer && userAnswer !== correctAnswer) {
                            opt.classList.add('incorrect');
                        }
                    });
                }
            });

            quizScorePercentage = totalScorableQuestions > 0 ? Math.round((score / totalScorableQuestions) * 100) : 100;
            
            saveDataToGoogleSheets(studentName, studentEmail, "week1", quizScorePercentage);

            setTimeout(() => {
                showResult(quizScorePercentage);
            }, 1500); 
        }

        function showResult(percentage) {
            quizView.classList.add('hidden');
            resultModal.classList.remove('hidden');
            
            setTimeout(() => {
                resultContent.classList.remove('scale-95', 'opacity-0');
                resultContent.classList.add('scale-100', 'opacity-100');
            }, 100);

            const scoreEl = document.getElementById('result-score');
            const titleEl = document.getElementById('result-title');
            const messageEl = document.getElementById('result-message');
            const cupContainer = document.getElementById('cup-container');
            const robotCongratsEl = document.getElementById('robot-congrats-text');
            
            scoreEl.innerHTML = `ƒêi·ªÉm tr·∫Øc nghi·ªám c·ªßa b·∫°n: <strong>${percentage}%</strong>`;

            if (percentage >= 80) {
                titleEl.textContent = "Xu·∫•t s·∫Øc!";
                messageEl.textContent = `Ch√∫c m·ª´ng ${studentName}! B·∫°n l√† ng∆∞·ªùi b·∫£o v·ªá tuy·ªát v·ªùi!`;
                cupContainer.style.display = 'block';
                triggerFireworks();
                
                normalResultContent.classList.remove('block');
                normalResultContent.classList.add('hidden');

                setTimeout(() => {
                    robotCongratsEl.textContent = `UKA H·∫° Long ch√∫c m·ª´ng ${studentName} ƒë√£ v∆∞·ª£t qua th·ª≠ th√°ch v√† ƒë·∫°t ƒë∆∞·ª£c huy hi·ªáu tu·∫ßn ‚ÄúChi·∫øn binh an to√†n s·ªë‚Äù!`;
                    robotMessageContent.classList.remove('hidden');
                    robotMessageContent.classList.add('block');
                }, 2000);
                
            } else {
                titleEl.textContent = "C·ªë g·∫Øng h∆°n nh√©!";
                messageEl.textContent = `H√£y √¥n l·∫°i ki·∫øn th·ª©c v√† th·ª≠ l·∫°i v√†o tu·∫ßn sau, ${studentName}!`;
                cupContainer.style.display = 'none';

                normalResultContent.classList.remove('hidden');
                normalResultContent.classList.add('block');
                robotMessageContent.classList.add('hidden');
            }
        }

        function triggerFireworks() {
            const myConfetti = confetti.create(fireworksCanvas, { resize: true, useWorker: true });
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 100 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }

            const interval = setInterval(() => {
              const timeLeft = animationEnd - Date.now();
              if (timeLeft <= 0) return clearInterval(interval);
              const particleCount = 50 * (timeLeft / duration);
              myConfetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
              myConfetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        async function saveDataToGoogleSheets(name, email, week, score) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbziOt9OPA8EZwpcXUhNECyc3Z98jtIbQr2m0PBcBGcNjhBBXPPx5hwsSqLfavwivb5n-g/exec';
            const formData = new FormData();
            formData.append('name', name);
            formData.append('email', email);
            formData.append('week', week);
            formData.append('score', score);

            try {
                 console.log('ƒêang g·ª≠i d·ªØ li·ªáu:', { name, email, week, score });
                await fetch(scriptURL, { method: 'POST', body: formData });
                console.log('G·ª≠i d·ªØ li·ªáu th√†nh c√¥ng (m√¥ ph·ªèng)');
            } catch (error) {
                console.error('L·ªói khi g·ª≠i d·ªØ li·ªáu:', error.message);
            }
        }
        
        function resetQuiz() {
            quizView.classList.add('hidden');
            theoryView.classList.add('hidden');
            registrationView.classList.remove('hidden');
            quizContainer.innerHTML = '';
            quizContainer.classList.remove('submitted');
            userAnswers = [];
            currentQuiz = {};
            submitQuizBtn.disabled = false;
            normalResultContent.classList.remove('hidden');
            normalResultContent.classList.add('block');
            robotMessageContent.classList.add('hidden');
        }

        // --- EVENT LISTENERS ---
        registrationForm.addEventListener('submit', (e) => {
            e.preventDefault();
            studentName = document.getElementById('student-name').value;
            studentEmail = document.getElementById('student-email').value;

            if (!studentName || !studentEmail) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß h·ªç t√™n v√† email.');
                return;
            }
            showTheory('week1');
        });

        startQuizBtn.addEventListener('click', () => {
            theoryView.classList.add('hidden');
            quizView.classList.remove('hidden');
            displayQuiz();
        });

        submitQuizBtn.addEventListener('click', submitQuiz);

        closeModalBtn.addEventListener('click', () => {
             resultModal.classList.add('hidden');
             resetQuiz();
        });

        continueBtn.addEventListener('click', () => {
             resultModal.classList.add('hidden');
             resetQuiz();
        });

        const shareOnFacebook = () => {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('T√¥i ƒë√£ ƒë·∫°t danh hi·ªáu "Chi·∫øn binh an to√†n s·ªë" trong chi·∫øn d·ªãch Kh√¥ng M·ªôt M√¨nh!');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        };

        const shareOnZalo = () => {
             const url = window.location.href;
             alert(`Sao ch√©p link n√†y v√† chia s·∫ª tr√™n Zalo nh√©: ${url}`);
        };

        document.getElementById('share-fb').addEventListener('click', shareOnFacebook);
        document.getElementById('share-zalo').addEventListener('click', shareOnZalo);
        document.getElementById('share-fb-2').addEventListener('click', shareOnFacebook);
        document.getElementById('share-zalo-2').addEventListener('click', shareOnZalo);

        // --- T·∫¢I ·∫¢NH ---
        document.getElementById('logo').src = 'logo-tron.png';
        document.getElementById('banner').src = 'Kmm-01.jpg';
    </script>
</body>
</html>



